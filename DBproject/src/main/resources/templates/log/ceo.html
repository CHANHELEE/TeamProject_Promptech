<!--

    total_page
   * page -> 어떤 페이지를 보고있는지?
   * page group -> 보고 있는 페이지의 그룹이 몇번째 인지? (ex) 한번에 5페이지씩 보여준다 -> 현재페이지 = 3 -> page group =1)
   * first G page-> 현재 속한 페이지 그룹의 첫번째 페이지는 무엇인가?
   * last G page -> 현재 속한 페이지 그룹의 마지막 페이지는 무엇인지?
   * (5 = 한번에 보여줄 페이지의 갯수)
   * pageCountInDisplay=한번에 보여줄 페이지의 갯수

    1. DB 쿼리 변경
    2. 컨트롤러 변경
    3. 프론트 변경

    page
-->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:c="http://www.w3.org/1999/XSL/Transform">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
<head th:replace="fragments/header :: header">
    <!--    한글 깨지는 이슈때문에 추가한것입니다 -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <style>
        .fieldError {
            border-color: #bd2130;
        }
        h1 {
            font-weight: bolder;
        }

    </style>
<body>
    <div style='width:1000px;margin:0 auto;margin-top:50px;font-size: 15px;'>
            <section class="container">
                <div class="row">
                    <h2 class="col-lg-4" style="margin-bottom: 20px;" th:text="|환영합니다 ${ceo.employee_name} 님|"></h2>
                    <form class="col-lg-2" th:action="@{/logout}" method="post">
                        <button class=" btn btn-dark btn-md"  type="submit">
                            로그아웃
                        </button>
                    </form>
                </div>
            </section>
                <tr th:each="empl : ${employee}" h>
                    <td th:text="*{empl.getEmployee_name()}"></td>

                </tr>


            <section>

            </section>


            <section>
                <nav aria-label="Page navigation example" class ="pages">
                    <ul id ="paging" class="pagination">


                    </ul>
                </nav>
            </section>


    </div>

<nav aria-label="Page navigation example" class ="pages">
    <ul class="pagination">


    </ul>
</nav>


<div th:replace="fragments/footer :: footer" />


<script th:inline="javascript">
    /*<![CDATA[*/
    let url = new URL("http://localhost:8080/log/ceo?page=")
    let page = ([[${page}]]==null)? 1 : [[${page}]]
    console.log(page);
    console.log([[${totalPage}]])

    let total_page = [[${totalPage}]];
    let paging = document.getElementById("paging");

    paging.addEventListener("click",pagination)

     function setPage(){
         console.log("fewfwefweffw")
         this.page = page;
     }

    function pagination () {
        let pageCountInDisplay =(total_page < 5 ? total_page : 5);

        let pageGroup = Math.ceil(page/pageCountInDisplay)

        let lastGPage = pageGroup * pageCountInDisplay

        let firstGPage = lastGPage-(pageCountInDisplay-1)

        let pageHtml = ``;

        console.log(page);
        for(let i = firstGPage; i <= lastGPage; i++){
            pageHtml+=`<li class="page-item ${page == i ? "active" : ""}"><a class="page-link" href="${url+i}"  >${i}</a></li>`
        }

        paging.innerHTML = pageHtml;
    }


    pagination()

    /*]]*/
</script>

</body>
</html>